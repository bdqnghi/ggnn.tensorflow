int main()
{
	char a[100][100];
	int n, m, i, j, x, y, d,count=0;
	int b[100][100];
	cin >> n;
	for(i=0;i<n;i++)
		for(j=0;j<n;j++)
			cin>>a[i][j];
	cin>>m;
	for(d=2;d<=m;d++)
	{
		for(x=0;x<n;x++)
			for(y=0;y<n;y++)
				b[x][y]=0;
		if(a[0][0]=='@'&&b[0][0]==0)
		{
			if(a[0][1]=='.'&&b[0][1]==0)
			{
				a[0][1]='@';
				b[0][1]=1;
			}
			if(a[1][0]=='.'&&b[1][0]==0)
			{
				a[1][0]='@';
				b[1][0]=1;
			}
		}
		if(a[0][n-1]=='@'&&b[0][n-1]==0)
		{
			if(a[0][n-2]=='.'&&b[0][n-2]==0)
			{
				a[0][n-2]='@';
				b[0][n-2]=1;
			}
			if(a[1][n-1]=='.'&&b[1][n-1]==0)
			{
				a[1][n-1]='@';
				b[1][n-1]=1;
			}
		}
		if(a[n-1][0]=='@'&&b[n-1][0]==0)
		{
			if(a[n-1][1]=='.'&&b[n-1][1]==0)
			{
				a[n-1][1]='@';
				b[n-1][1]=1;
			}
			if(a[n-2][0]=='.'&&b[n-2][0]==0)
			{
				a[n-2][0]='@';
				b[n-2][0]=1;
			}
		}
		if(a[n-1][n-1]=='@'&&b[n-1][n-1]==0)
		{
			if(a[n-1][n-2]=='.'&&b[n-1][n-2]==0)
			{
				a[n-1][n-2]='@'&&b[n-1][n-2]==0;
				b[n-1][n-2]=1;
			}
			if(a[n-2][n-1]=='.'&&b[n-2][n-1]==0)
			{
				a[n-2][n-1]='@';
				b[n-2][n-1]=1;
			}
		}
		for(j=1;j<n-1;j++)
		{
			if(a[0][j]=='@'&&b[0][j]==0)
			{
				if(a[0][j+1]=='.'&&b[0][j+1]==0)
				{
					a[0][j+1]='@';
					b[0][j+1]=1;
				}
				if(a[0][j-1]=='.'&&b[0][j-1]==0)
				{
					a[0][j-1]='@';
					b[0][j-1]=1;
				}
				if(a[1][j]=='.'&&b[1][j]==0)
				{
					a[1][j]='@';
					b[1][j]=1;
				}
			}
			if(a[n-1][j]=='@'&&b[n-1][j]==0)
			{
				if(a[n-1][j+1]=='.'&&b[n-1][j+1]==0)
				{
					a[n-1][j+1]='@';
					b[n-1][j+1]=1;
				}
				if(a[n-1][j-1]=='.'&&b[n-1][j-1]==0)
				{
					a[n-1][j-1]='@';
					b[n-1][j-1]=1;
				}
				if(a[n-2][j]=='.'&&b[n-2][j]==0)
				{
					a[n-2][j]='@';
					b[n-2][j]=1;
				}
			}
		}
		for(i=1;i<n-1;i++)
		{
			if(a[i][0]=='@'&&b[i][0]==0)
			{
				if(a[i+1][0]=='.'&&b[i+1][0]==0)
				{
					a[i+1][0]='@';
					b[i+1][0]=1;
				}
				if(a[i-1][0]=='.'&&b[i-1][0]==0)
				{
					a[i-1][0]='@';
					b[i-1][0]=1;
				}
				if(a[i][1]=='.'&&b[i][1]==0)
				{
					a[i][1]='@';
					b[i][1]=1;
				}
			}
			if(a[i][n-1]=='@'&&b[i][n-1]==0)
			{
				if(a[i+1][n-1]=='.'&&b[i+1][n-1]==0)
				{
					a[i+1][n-1]='@';
					b[i+1][n-1]=1;
				}
				if(a[i-1][n-1]=='.'&&b[i-1][n-1]==0)
				{
					a[i-1][n-1]='@';
					b[i-1][n-1]=1;
				}
				if(a[i][n-2]=='.'&&b[i][n-2]==0)
				{
					a[i][n-2]='@';
					b[i][n-2]=1;
				}
			}
		}
		for(i=1;i<n-1;i++)
		{
			for(j=1;j<n-1;j++)
			{
				if(a[i][j]=='@'&&b[i][j]==0)
				{
					if(a[i+1][j]=='.'&&b[i+1][j]==0)
					{
						a[i+1][j]='@';
						b[i+1][j]=1;
					}
					if(a[i-1][j]=='.'&&b[i-1][j]==0)
					{
						a[i-1][j]='@';
						b[i-1][j]=1;
					}
					if(a[i][j+1]=='.'&&b[i][j+1]==0)
					{
						a[i][j+1]='@';
						b[i][j+1]=1;
					}
					if(a[i][j-1]=='.'&&b[i][j-1]==0)
					{
						a[i][j-1]='@';
						b[i][j-1]=1;
					}
				}
			}
		}
	}
	for(i=0;i<n;i++)
		for(j=0;j<n;j++)
			if(a[i][j]=='@')
				count++;
	cout << count <<endl;
	return 0;
}
